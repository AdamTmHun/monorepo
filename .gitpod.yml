# use the custom image defined in this repository
image:
  file: .gitpod.Dockerfile

tasks:
  - init: npm install && npm run build
    # install and use node 18
    before: |
      nvm i 18.12
      nvm use 18.12
      nvm alias default 18.12
    # using doppler run to set env variables automatically
    # the DOPPLER_DEVELOPMENT_SERVICE_KEY is set in gitpod's UI
    command: doppler run --token $DOPPLER_DEVELOPMENT_SERVICE_KEY -- npm run dev

ports:
  - name: "@inlang/website"
    port: 3000
    onOpen: notify

github:
  prebuilds:
    addBadge: true

vscode:
  extensions:
    - aaron-bond.better-comments
    - "usernamehw.errorlens"
    - "mhutchie.git-graph"
    - "yzhang.markdown-all-in-one"
    - "bierner.markdown-preview-github-styles"
    - "bierner.markdown-mermaid"
    - "pkief.material-icon-theme"
    - "bradlc.vscode-tailwindcss"
    - "esbenp.prettier-vscode"
